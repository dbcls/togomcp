schema_info:
  title: Rhea - Annotated Reactions Database
  description: |
    Expert-curated database of 17,078 biochemical reactions with atom-balanced chemistry, extensive cross-references, and enzyme classifications. All reactions have directional (L→R, R→L) and bidirectional representations. Covers 11,763 small molecules and 254 polymers with ChEBI links. Transport reactions (5,984) include cellular location annotations. Primary reaction resource for UniProtKB enzyme annotation.
  endpoint: https://rdfportal.org/sib/sparql
  base_uri: http://rdf.rhea-db.org/
  graphs:
    - http://rdfportal.org/dataset/rhea
  kw_search_tools:
    - search_rhea_entity
  version:
    mie_version: "1.3"
    mie_created: "2025-02-04"
    data_version: "Release 2024"
    update_frequency: "Quarterly"
  license:
    data_license: "CC BY 4.0"
    license_url: "https://www.rhea-db.org/help/license"
  access:
    rate_limiting: "No explicit rate limit"
    max_query_timeout: "60 seconds"
    backend: "Virtuoso"

shape_expressions: |
  PREFIX rhea: <http://rdf.rhea-db.org/>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  
  <ReactionShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:Reaction ] ;
    rdfs:label xsd:string ;
    rhea:accession xsd:string ;
    rhea:id xsd:integer ;
    rhea:equation xsd:string ;
    rhea:htmlEquation xsd:string ;
    rhea:status IRI ;
    rhea:isChemicallyBalanced xsd:boolean ;
    rhea:isTransport xsd:boolean ;
    rhea:side IRI + ;
    rhea:directionalReaction IRI + ;
    rhea:bidirectionalReaction IRI ? ;
    rhea:ec IRI * ;
    rdfs:seeAlso IRI * ;
    rdfs:comment xsd:string ?
  }
  
  <DirectionalReactionShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:DirectionalReaction ] * ;
    rdfs:subClassOf IRI +
  }
  
  <BidirectionalReactionShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:BidirectionalReaction ] * ;
    rdfs:subClassOf IRI +
  }
  
  <ReactionSideShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:ReactionSide ] ;
    rhea:contains IRI + ;
    rhea:contains1 IRI * ;
    rhea:contains2 IRI * ;
    rhea:contains3 IRI * ;
    rhea:containsN IRI * ;
    rhea:curatedOrder xsd:integer ;
    rhea:transformableTo IRI ?
  }
  
  <ParticipantShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:ReactionParticipant ] ;
    rdfs:subClassOf IRI + ;
    rhea:compound IRI ;
    rhea:location IRI ?
  }
  
  <SmallMoleculeShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:SmallMolecule ] ;
    rdfs:subClassOf IRI * ;
    rhea:id xsd:integer ;
    rhea:accession xsd:string ;
    rhea:name xsd:string ;
    rhea:htmlName xsd:string ;
    rhea:formula xsd:string ;
    rhea:charge xsd:integer ;
    rhea:chebi IRI
  }
  
  <PolymerShape> {
    a [ rdfs:Class ] ;
    rdfs:subClassOf [ rhea:Polymer ] ;
    rhea:id xsd:integer ;
    rhea:accession xsd:string ;
    rhea:name xsd:string ;
    rhea:htmlName xsd:string ;
    rhea:formula xsd:string ;
    rhea:charge xsd:string ;
    rhea:polymerizationIndex xsd:string ;
    rhea:underlyingChebi IRI ?
  }

sample_rdf_entries:
  - title: Master Reaction Entry
    description: Pentanamide hydrolysis with EC number, GO term, and directional/bidirectional variants.
    rdf: |
      <http://rdf.rhea-db.org/10000> a rdfs:Class ;
        rdfs:subClassOf rhea:Reaction ;
        rdfs:label "H2O + pentanamide = NH4(+) + pentanoate" ;
        rdfs:comment "Published in: Friedich, C.G. and Mitrenga, G. ..." ;
        rdfs:seeAlso <http://purl.obolibrary.org/obo/GO_0050168> ;
        rhea:accession "RHEA:10000" ;
        rhea:equation "H2O + pentanamide = NH4(+) + pentanoate" ;
        rhea:status rhea:Approved ;
        rhea:isChemicallyBalanced 1 ;
        rhea:ec <http://purl.uniprot.org/enzyme/3.5.1.50> ;
        rhea:directionalReaction <http://rdf.rhea-db.org/10001>, <http://rdf.rhea-db.org/10002> .
  
  - title: Reaction Side with Stoichiometry
    description: Left side with two participants, stoichiometry encoded in property names (contains1).
    rdf: |
      <http://rdf.rhea-db.org/10000_L> a rdfs:Class ;
        rdfs:subClassOf rhea:ReactionSide ;
        rhea:contains <http://rdf.rhea-db.org/Participant_10000_compound_1283> ;
        rhea:contains1 <http://rdf.rhea-db.org/Participant_10000_compound_1283> ;
        rhea:curatedOrder 1 ;
        rhea:transformableTo <http://rdf.rhea-db.org/10000_R> .
  
  - title: Small Molecule
    description: Water molecule with chemical formula, charge, and ChEBI cross-reference.
    rdf: |
      <http://rdf.rhea-db.org/Compound_1283> a rdfs:Class ;
        rdfs:subClassOf rhea:SmallMolecule ;
        rdfs:subClassOf <http://purl.obolibrary.org/obo/CHEBI_15377> ;
        rhea:accession "CHEBI:15377" ;
        rhea:name "H2O" ;
        rhea:formula "H2O" ;
        rhea:charge 0 ;
        rhea:chebi <http://purl.obolibrary.org/obo/CHEBI_15377> .
  
  - title: Polymer Structure
    description: Polysaccharide chain with polymerization index notation (n-1) and underlying ChEBI reference.
    rdf: |
      <http://rdf.rhea-db.org/Compound_10035> a rdfs:Class ;
        rdfs:subClassOf rhea:Polymer ;
        rhea:accession "POLYMER:10035" ;
        rhea:name "[(1->4)-beta-D-glucosyl](n-1)" ;
        rhea:formula "H2O(C6H10O5)(n-1)" ;
        rhea:polymerizationIndex "n-1" ;
        rhea:underlyingChebi <http://purl.obolibrary.org/obo/CHEBI_18246> .
  
  - title: Transport Participant
    description: Participant in transport reaction with cellular location annotation (inside cell).
    rdf: |
      <http://rdf.rhea-db.org/Participant_20621_compound_1073_in> a rdfs:Class ;
        rdfs:subClassOf rhea:ReactionParticipant ;
        rdfs:subClassOf <http://rdf.rhea-db.org/Compound_1073> ;
        rhea:compound <http://rdf.rhea-db.org/Compound_1073> ;
        rhea:location rhea:In .

sparql_query_examples:
  - title: Search Reactions by Keyword
    description: Find approved ATP reactions using full-text search with relevance ranking.
    question: What are some approved reactions involving ATP?
    complexity: basic
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?equation ?label
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rdfs:label ?label ;
                  rhea:status rhea:Approved .
        ?equation bif:contains "'atp'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 20
  
  - title: Get Reaction Details
    description: Retrieve complete information for reaction RHEA:10000.
    question: What are the details of reaction RHEA:10000?
    complexity: basic
    sparql: |
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?property ?value
      WHERE {
        ?reaction rhea:accession "RHEA:10000" ;
                  ?property ?value .
      }
  
  - title: Find Transport Reactions
    description: Identify membrane transport reactions with substrates and cellular locations.
    question: Which reactions involve transport across cellular membranes?
    complexity: intermediate
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?equation ?compound ?location
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rhea:isTransport 1 ;
                  rhea:side ?side .
        ?side rhea:contains ?participant .
        ?participant rhea:compound ?compound ;
                     rhea:location ?location .
      }
      LIMIT 50
  
  - title: Reactions with EC Numbers and GO Terms
    description: Find reactions with enzyme classification and Gene Ontology molecular function annotations.
    question: Which reactions have both EC classification and GO annotations?
    complexity: intermediate
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT DISTINCT ?reaction ?equation ?ec ?goTerm
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rhea:ec ?ec ;
                  rdfs:seeAlso ?goTerm .
        FILTER(STRSTARTS(STR(?goTerm), "http://purl.obolibrary.org/obo/GO_"))
      }
      LIMIT 50
  
  - title: Boolean Keyword Search
    description: Find reactions with multiple keywords using AND/OR operators and relevance ranking.
    question: What reactions involve both glucose and phosphate?
    complexity: intermediate
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?equation
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rhea:status rhea:Approved .
        ?equation bif:contains "'glucose' AND 'phosphate'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 20
  
  - title: Get Directional Variants
    description: Retrieve all directional and bidirectional forms of a master reaction.
    question: What are all the directional forms of reaction RHEA:10000?
    complexity: advanced
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?masterReaction ?directional ?bidirectional ?type
      WHERE {
        ?masterReaction rhea:accession "RHEA:10000" .
        OPTIONAL {
          ?masterReaction rhea:directionalReaction ?directional .
          ?directional rdfs:subClassOf rhea:DirectionalReaction .
          BIND("directional" AS ?type)
        }
        OPTIONAL {
          ?masterReaction rhea:bidirectionalReaction ?bidirectional .
          BIND("bidirectional" AS ?type)
        }
      }
  
  - title: Reactions with Polymers
    description: Find polymer-involving reactions with literature citations and pathway cross-references.
    question: Which reactions involve polymers and have extensive literature support?
    complexity: advanced
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT DISTINCT ?reaction ?equation ?polymer ?citation ?kegg
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rhea:side ?side .
        ?side rhea:contains ?participant .
        ?participant rhea:compound ?compound .
        ?compound rdfs:subClassOf rhea:Polymer ;
                  rhea:name ?polymer .
        OPTIONAL { ?reaction rdfs:comment ?citation . }
        OPTIONAL { 
          ?reaction rdfs:seeAlso ?kegg .
          FILTER(CONTAINS(STR(?kegg), "kegg.reaction"))
        }
      }
      LIMIT 30

cross_database_queries:
  shared_endpoint: sib
  co_located_databases:
    - uniprot
  examples:
    - title: Enzymes Catalyzing Reactions
      description: |
        Link biochemical reactions to catalyzing enzymes using shared SIB endpoint.
        Demonstrates enzyme-reaction integration for drug target discovery and metabolic pathway analysis.
      databases_used:
        - rhea
        - uniprot
      complexity: intermediate
      sparql: |
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX rhea: <http://rdf.rhea-db.org/>
        PREFIX up: <http://purl.uniprot.org/core/>
        
        SELECT ?reaction ?equation ?enzyme ?protein ?fullName
        WHERE {
          GRAPH <http://rdfportal.org/dataset/rhea> {
            ?reaction rdfs:subClassOf rhea:Reaction ;
                      rhea:equation ?equation ;
                      rhea:status rhea:Approved ;
                      rhea:ec ?enzyme .
            ?equation bif:contains "'ATP'" option (score ?sc) .
          }
          GRAPH <http://sparql.uniprot.org/uniprot> {
            ?protein a up:Protein ;
                     up:reviewed 1 ;
                     up:enzyme ?enzyme ;
                     up:recommendedName ?name .
            ?name up:fullName ?fullName .
          }
        }
        ORDER BY DESC(?sc)
        LIMIT 20
      notes: |
        - Strategies: 1 (GRAPH), 2 (pre-filtering), 4 (split paths), 8 (reviewed=1, approved), 10 (LIMIT)
        - Performance: ~2-3s (Tier 1)
        - bif:contains + reviewed=1 reduces search space 99.9%
        - MIE files referenced: rhea, uniprot
    
    - title: Human Enzymes and Reactions
      description: |
        Identify human proteins and their catalyzed reactions.
        Integrates curated protein data with reaction chemistry for metabolism studies.
      databases_used:
        - uniprot
        - rhea
      complexity: intermediate
      sparql: |
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX rhea: <http://rdf.rhea-db.org/>
        PREFIX up: <http://purl.uniprot.org/core/>
        
        SELECT ?protein ?mnemonic ?fullName ?reaction ?equation
        WHERE {
          GRAPH <http://sparql.uniprot.org/uniprot> {
            ?protein a up:Protein ;
                     up:reviewed 1 ;
                     up:organism <http://purl.uniprot.org/taxonomy/9606> ;
                     up:mnemonic ?mnemonic ;
                     up:enzyme ?enzyme ;
                     up:recommendedName ?name .
            ?name up:fullName ?fullName .
          }
          GRAPH <http://rdfportal.org/dataset/rhea> {
            ?reaction rdfs:subClassOf rhea:Reaction ;
                      rhea:equation ?equation ;
                      rhea:status rhea:Approved ;
                      rhea:ec ?enzyme .
          }
        }
        LIMIT 20
      notes: |
        - Strategies: 1 (GRAPH), 2 (organism pre-filter), 8 (reviewed=1, approved), 10 (LIMIT)
        - Performance: ~3-4s (Tier 1-2)
        - Organism filtering reduces dataset 95.7% before join
        - MIE files referenced: uniprot, rhea
    
    - title: Reactions with Protein GO Terms
      description: |
        Three-way integration linking reactions, enzymes, and biological process annotations.
        Provides comprehensive context for systems biology and pathway enrichment analysis.
      databases_used:
        - rhea
        - uniprot
      complexity: advanced
      sparql: |
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX rhea: <http://rdf.rhea-db.org/>
        PREFIX up: <http://purl.uniprot.org/core/>
        
        SELECT DISTINCT ?reaction ?equation ?protein ?mnemonic ?goLabel
        WHERE {
          GRAPH <http://rdfportal.org/dataset/rhea> {
            ?reaction rdfs:subClassOf rhea:Reaction ;
                      rhea:equation ?equation ;
                      rhea:status rhea:Approved ;
                      rhea:ec ?enzyme .
          }
          GRAPH <http://sparql.uniprot.org/uniprot> {
            ?protein a up:Protein ;
                     up:reviewed 1 ;
                     up:enzyme ?enzyme ;
                     up:mnemonic ?mnemonic ;
                     up:classifiedWith ?goTerm .
          }
          GRAPH <http://sparql.uniprot.org/go> {
            ?goTerm rdfs:label ?goLabel .
            FILTER(STRSTARTS(STR(?goTerm), "http://purl.obolibrary.org/obo/GO_"))
          }
        }
        LIMIT 30
      notes: |
        - Strategies: 1 (GRAPH), 2 (pre-filtering), 8 (database-specific filters), 10 (LIMIT)
        - Performance: ~4-6s (Tier 2-3)
        - Three-way join optimized through pre-filtering in each graph
        - MIE files referenced: rhea, uniprot

cross_references:
  - pattern: rdfs:seeAlso
    description: |
      Reactions link to external databases via rdfs:seeAlso using identifiers.org URIs or database-specific namespaces.
      Transport reactions include cellular compartment annotations (rhea:In, rhea:Out).
    databases:
      Gene_Ontology:
        - "GO (Molecular Function): High coverage via http://purl.obolibrary.org/obo/GO_XXXXXXX"
      Metabolic_Pathways:
        - "KEGG Reaction: Extensive via http://identifiers.org/kegg.reaction/RXXXXX"
        - "BioCyc/MetaCyc: Comprehensive via http://identifiers.org/biocyc/METACYC:XXX"
        - "Reactome: Selected via http://identifiers.org/reactome/R-HSA-XXXXXX"
      Enzyme_Mechanisms:
        - "MACiE: Mechanism annotations via http://identifiers.org/macie/MXXXX"
      Chemical_Structures:
        - "ChEBI: All compounds via http://purl.obolibrary.org/obo/CHEBI_XXXXX"
      Enzyme_Classification:
        - "EC Numbers: Via http://purl.uniprot.org/enzyme/X.X.X.X"
    sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?equation ?externalDB
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rdfs:seeAlso ?externalDB .
      }
      LIMIT 100

architectural_notes:
  schema_design:
    - "Reactions have three representations: master, directional (L→R, R→L), bidirectional"
    - "Reaction IDs form quartets: 10000 (master), 10001 (L→R), 10002 (R→L), 10003 (bidirectional)"
    - Stoichiometry encoded in property names (contains1, contains2, contains3, containsN)
    - Transport reactions have participants with rhea:location (rhea:In, rhea:Out)
    - Compounds are SmallMolecule (with ChEBI) or Polymer (with polymerization indices)
  performance:
    - Use bif:contains for text search in equations/labels - faster than FILTER(CONTAINS())
    - "Boolean operators in bif:contains: \"'glucose' AND 'phosphate'\" or \"'atp' OR 'gtp'\""
    - Filter by rhea:status rhea:Approved early (16,685 approved vs 17,078 total)
    - Start from reactions then traverse to compounds for better performance
    - Always use LIMIT for relationship traversals
    - "Cross-database: Use GRAPH clauses (Strategy 1), pre-filter within GRAPH (Strategy 2)"
    - "bif:contains with split paths (Strategy 4) provides 5-10x speedup"
  data_integration:
    - ChEBI integration via rdfs:subClassOf and rhea:chebi enables compound queries
    - EC numbers link to UniProt enzyme namespace for protein function connections
    - GO terms provide gene/protein annotation pathways
    - KEGG, MetaCyc, Reactome links enable metabolic pathway mapping
    - "Cross-database with UniProt via shared SIB endpoint: Tier 1 (1-3s) with optimization"
    - "Linking mechanism: rhea:ec ↔ up:enzyme"
  data_quality:
    - All approved reactions are chemically balanced (rhea:isChemicallyBalanced = 1)
    - Preliminary reactions (393) indicate ongoing curation
    - Obsolete reactions (1,120) retained for historical reference
    - Polymers use specialized notation (n, n-1) in formulas and charges

data_statistics:
  total_reactions: 17078
  verified_date: "2025-02-04"
  verification_query: |
    SELECT (COUNT(DISTINCT ?r) as ?count)
    WHERE { ?r rdfs:subClassOf rhea:Reaction }
  
  directional_reactions: 34156
  bidirectional_reactions: 17078
  small_molecules: 11763
  polymers: 254
  transport_reactions: 5984
  
  reaction_status:
    approved: 16685
    preliminary: 393
    obsolete: 1120
    verified_date: "2025-02-04"
    verification_query: |
      SELECT (COUNT(?r) as ?approved)
      WHERE { ?r rhea:status rhea:Approved }
  
  coverage:
    reactions_with_ec: "~45%"
    reactions_with_go: "~55%"
    reactions_with_kegg: "~35%"
    compounds_with_chebi: "100%"
  
  cardinality:
    avg_participants_per_reaction: "4-6"
    avg_cross_refs_per_reaction: "1-5"
  
  performance_characteristics:
    - "Simple lookups by ID: <1s"
    - "bif:contains searches: <1s for 20 results"
    - "Complex joins (reactions-participants-compounds): 2-5s with LIMIT 50"
    - "Cross-DB with UniProt: Tier 1 (1-3s) with bif:contains + pre-filtering"
    - "Cross-DB three-way joins: Tier 2-3 (3-8s)"
  
  staleness_warning: "Quarterly updates - verify current data at www.rhea-db.org for latest statistics"

anti_patterns:
  - title: Using FILTER(CONTAINS()) Instead of bif:contains
    problem: Standard FILTER is much slower and lacks relevance ranking.
    wrong_sparql: |
      SELECT ?reaction ?equation
      WHERE {
        ?reaction rhea:equation ?equation .
        FILTER(CONTAINS(LCASE(?equation), "atp"))
      }
    correct_sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?equation
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rhea:status rhea:Approved .
        ?equation bif:contains "'atp'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 20
    explanation: Use bif:contains with ORDER BY DESC(?sc) for 5-10x speedup and relevance ranking.
  
  - title: Missing LIMIT on Open-Ended Queries
    problem: Queries without LIMIT timeout on large result sets.
    wrong_sparql: |
      SELECT ?reaction ?participant ?compound
      WHERE {
        ?reaction rhea:side ?side .
        ?side rhea:contains ?participant .
        ?participant rhea:compound ?compound .
      }
    correct_sparql: |
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?participant ?compound
      WHERE {
        ?reaction rhea:side ?side .
        ?side rhea:contains ?participant .
        ?participant rhea:compound ?compound .
      }
      LIMIT 100
    explanation: Always use LIMIT when traversing relationships to prevent timeouts.
  
  - title: Confusing Reaction Types
    problem: Querying master reactions but expecting directional properties.
    wrong_sparql: |
      SELECT ?reaction ?direction
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:direction ?direction .
      }
    correct_sparql: |
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?masterReaction ?directionalReaction
      WHERE {
        ?masterReaction rdfs:subClassOf rhea:Reaction ;
                        rhea:directionalReaction ?directionalReaction .
      }
      LIMIT 50
    explanation: Master reactions link to directional forms via rhea:directionalReaction property.

common_errors:
  - error: Query timeout when counting reactions
    causes:
      - Not using LIMIT on large aggregations
      - Attempting full reaction-participant-compound graph traversal
    solutions:
      - Add LIMIT even to COUNT queries
      - Break complex queries into focused subqueries
      - Use status filters early (rhea:Approved)
    example_fix: |
      SELECT (COUNT(?reaction) as ?count)
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction .
      }
      LIMIT 1
  
  - error: Empty results when searching compounds
    causes:
      - Searching participant entities instead of compound entities
      - Not following reaction→side→participant→compound path
      - Using FILTER(CONTAINS()) instead of bif:contains
    solutions:
      - Query compound properties from rhea:Compound_XXXX entities
      - Use rhea:compound to link participants to compounds
      - Use bif:contains for efficient text search
    example_fix: |
      PREFIX rhea: <http://rdf.rhea-db.org/>
      
      SELECT ?reaction ?equation ?compoundName
      WHERE {
        ?compound rhea:name ?compoundName .
        ?compoundName bif:contains "'glucose'" option (score ?sc) .
        ?participant rhea:compound ?compound .
        ?side rhea:contains ?participant .
        ?reaction rhea:side ?side ;
                  rhea:equation ?equation .
      }
      ORDER BY DESC(?sc)
      LIMIT 20
  
  - error: Missing cross-references
    causes:
      - OPTIONAL without proper structure
      - Not filtering by database type
    solutions:
      - Use FILTER to specify cross-reference patterns (STRSTARTS)
      - Apply DISTINCT for multiple optional references
      - Query one reference type at a time
    example_fix: |
      SELECT DISTINCT ?reaction ?equation ?goTerm
      WHERE {
        ?reaction rdfs:subClassOf rhea:Reaction ;
                  rhea:equation ?equation ;
                  rdfs:seeAlso ?goTerm .
        FILTER(STRSTARTS(STR(?goTerm), "http://purl.obolibrary.org/obo/GO_"))
      }
      LIMIT 50